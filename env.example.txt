# MunLink Region 3 - Environment Variables Template
# Copy this file to .env and fill in your actual values
# WARNING: Never commit actual credentials to version control!

# =============================================================================
# DATABASE
# =============================================================================
# PostgreSQL connection string (Supabase recommended)
# DATABASE_URL=postgresql://user:password@host:5432/database

# =============================================================================
# SECURITY KEYS (REQUIRED - Generate strong random values)
# =============================================================================
# Flask secret key for session management (use: python -c "import secrets; print(secrets.token_hex(32))")
SECRET_KEY=your-secret-key-generate-a-strong-random-value

# JWT secret for token signing (use: python -c "import secrets; print(secrets.token_hex(32))")
JWT_SECRET_KEY=your-jwt-secret-key-generate-a-strong-random-value

# Admin secret (required by backend config; do not expose publicly)
# Admin creation is restricted to authenticated superadmins.
ADMIN_SECRET_KEY=your-admin-secret-key

# Encryption key for claim codes (optional, falls back to JWT_SECRET_KEY)
# CLAIM_CODE_ENC_KEY=your-32-byte-base64-encoded-key

# =============================================================================
# EMAIL CONFIGURATION (SendGrid recommended for production)
# =============================================================================
# SendGrid API Key (get from https://sendgrid.com)
SENDGRID_API_KEY=your-sendgrid-api-key

# Sender email address (must be verified in SendGrid)
FROM_EMAIL=noreply@yourdomain.com

# Legacy SMTP (blocked on Render free tier, use SendGrid instead)
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# =============================================================================
# STRIPE PAYMENTS (Digital document payments)
# =============================================================================
# Stripe secret key (server-side)
STRIPE_SECRET_KEY=sk_test_your_key_here
# Stripe publishable key (frontend)
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
# Stripe webhook signing secret (for /api/stripe/webhook)
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# =============================================================================
# MANUAL QR PAYMENT (Global fallback + user-selectable)
# =============================================================================
# Local path to QR image (served via protected endpoint)
MANUAL_QR_IMAGE_PATH=public/payment/paymentQR_fallback.jpg
# Payment instructions shown to residents
MANUAL_PAYMENT_INSTRUCTIONS=Scan the QR, pay the exact amount shown, upload proof, then enter the Payment ID sent to your email.
# Optional display name for pay-to account
MANUAL_PAY_TO_NAME=
# Pay-to number (GCash/PayMaya/bank QR)
MANUAL_PAY_TO_NUMBER=09764859463
# Private Supabase bucket for payment proofs
SUPABASE_PRIVATE_BUCKET=munlinkprivate-files

# =============================================================================
# SMS CONFIGURATION
# =============================================================================
# SMS delivery provider: philsms | console | disabled
SMS_PROVIDER=disabled
# PhilSMS credentials (required when SMS_PROVIDER=philsms)
# PHILSMS_API_KEY=your-philsms-api-token
# Sender ID (use "PhilSMS" as default, or register custom sender ID in dashboard)
# PHILSMS_SENDER_ID=PhilSMS
# Base URL override (defaults to https://dashboard.philsms.com/api/v3)
# PHILSMS_BASE_URL=https://dashboard.philsms.com/api/v3
# Cache duration for account capability checks (seconds)
# SMS_CAPABILITY_CACHE_SECONDS=90

# =============================================================================
# APPLICATION URLS
# =============================================================================
# Frontend URL (for email verification links, CORS, etc.)
WEB_URL=http://localhost:5173

# Admin dashboard URL
ADMIN_URL=http://localhost:3001

# Optional explicit CORS allowlist (comma-separated)
# In production, set WEB_URL/ADMIN_URL and/or this value.
# CORS_ALLOWED_ORIGINS=https://munlink.example.com,https://admin.munlink.example.com
CORS_ALLOWED_ORIGINS=

# Password reset token lifetime (minutes)
PASSWORD_RESET_TOKEN_TTL_MINUTES=30

# API base URL (for QR codes, file URLs)
BASE_URL=http://localhost:5000

# QR code verification base URL
QR_BASE_URL=http://localhost:5173/verify

# =============================================================================
# FILE UPLOADS (Legacy - used in development mode only)
# =============================================================================
UPLOAD_FOLDER=uploads/region3
MAX_FILE_SIZE=10485760
ALLOWED_EXTENSIONS=pdf,jpg,jpeg,png,doc,docx

# =============================================================================
# PRIVACY & DATA RETENTION
# =============================================================================
# ID/Selfie Retention Policy
# Number of days to retain verification images after approval/rejection
# After this period, images are auto-deleted by cleanup script
ID_RETENTION_DAYS=30

# =============================================================================
# SUPABASE STORAGE (REQUIRED for production)
# =============================================================================
# Supabase project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase anon key (for client-side access)
SUPABASE_KEY=your-anon-key

# Supabase service role key (for server-side storage operations)
# Get this from Supabase Dashboard > Project Settings > API > service_role
SUPABASE_SERVICE_KEY=your-service-role-key

# Storage bucket name (default: munlink-files)
SUPABASE_STORAGE_BUCKET=munlink-files

# Force Supabase storage in development (optional, default: false)
# Set to 'true' to test Supabase storage locally
# FORCE_SUPABASE_STORAGE=false

# =============================================================================
# RATE LIMITING
# =============================================================================
# In production, use a shared backend (Redis) - memory:// is for local dev only.
# Example: redis://localhost:6379/0
RATELIMIT_STORAGE_URI=memory://

# Allowed file domains for secure document serving (comma-separated)
# Prevents open redirect attacks when serving files from external URLs
# Example: your-project.supabase.co
# Leave empty to allow all domains (not recommended for production)
ALLOWED_FILE_DOMAINS=

# =============================================================================
# OPTIONAL: Admin Seeding Configuration
# =============================================================================
# Base Gmail address for plus-addressing during admin seeding
# ADMIN_BASE_EMAIL=admin@yourdomain.com
# Password suffix for generated admin accounts
# ADMIN_PASSWORD_SUFFIX=@SecurePassword2026

# =============================================================================
# OPTIONAL: JWT Cookie Settings (for production)
# =============================================================================
# JWT_COOKIE_SECURE=True
# JWT_COOKIE_SAMESITE=Lax
# JWT_COOKIE_CSRF_PROTECT=True
# COOKIE_DOMAIN=.yourdomain.com
